### 文書番号: 07-001

## 1. アプリ名
- アプリ名: 写真／動画キャプチャアプリ

## 2. 概要
Raspberry PiカメラモジュールまたはUSBカメラを用いて静止画および動画を撮影し、指定のフォルダに保存するPythonアプリケーションです。ユーザーはコマンドライン引数で解像度やファイル形式、保存先を指定でき、手動撮影を行えます。

## 3. 目的
- Raspberry Piに接続されたカメラデバイスの制御方法を学ぶ
- Pythonを用いた画像・動画キャプチャ技術を習得する
- ファイルの命名規則や保存管理方法を理解する

## 4. 対象利用者
- プログラミング初心者
- Raspberry Pi入門者
- 画像・動画処理の初学者

## 5. システム構成
| コンポーネント                                   | 役割                             |
|------------------------------------------------|----------------------------------|
| Raspberry Pi 5                                 | カメラ制御、スクリプト実行       |
| Raspberry Pi カメラモジュール または USBカメラ | 静止画・動画撮影                 |
| microSDカード                                  | データ保存                       |
| 保存フォルダ                                   | 画像・動画ファイルの格納場所     |

## 6. ハードウェア要件
- Raspberry Pi 5本体
- microSDカード（Raspberry Pi OSインストール済み）
- Raspberry Pi カメラモジュール v2 または互換USBウェブカメラ
- ケースやスタンド（カメラ固定用、オプション）
- 電源（公式5V電源アダプタ）

## 7. ソフトウェア要件
- OS：Raspberry Pi OS（最新推奨）
- 言語：Python 3.9以上

## 8. 機能要件
1. **デバイス検出**
   - 接続されたカメラデバイス（PiCamera/USB）の種類と解像度を検出
2. **静止画撮影**
   - 解像度（幅×高さ）、ファイル形式（jpg/png）を引数で指定して撮影
   - ファイル名にタイムスタンプを付与
3. **動画録画**
   - 解像度、フレームレート、録画時間（秒）を指定してMP4形式で保存
   - 保存開始・停止をコマンドで制御
4. **保存先指定**
   - コマンドライン引数 `--output` で保存ディレクトリを指定
5. **ログ出力**
   - 撮影開始／完了時に標準出力にメッセージを表示

## 9. 非機能要件
- **可読性**: PEP8準拠でコメントを適切に記載
- **保守性**: モジュール構造と関数設計で拡張しやすく
- **移植性**: Picamera2 と OpenCV の切り替えオプションを用意
- **性能**: 高解像度撮影時も指定録画時間内に処理が完了すること
- **単一ファイル完結**: 可能な限り一つのPythonファイルで完結する設計とする

## 10. テスト要件
- **静止画撮影テスト**: 各解像度・フォーマットで正しくファイル生成
- **動画録画テスト**: 指定時間・フレームレートで録画後、再生確認
- **異常系テスト**: 無効なデバイス指定時／保存先権限エラー時のハンドリング確認

## 11. 受け入れ基準
1. 静止画および動画がユーザー指定の設定で正常に保存される
2. 不正な引数やデバイスエラーで適切なエラーメッセージが表示される
3. ログ出力に撮影ステータスが明確に記録される

---
以上の要件をもとに、写真／動画キャプチャアプリのプロトタイプを開発してください。
